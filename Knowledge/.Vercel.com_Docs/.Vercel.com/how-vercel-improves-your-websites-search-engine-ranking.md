::::::::::::::::::::::::::::::::::::::::: {role="main"}
:::::::::::::::::::::::::::::::::::::::: {.stack_stack__iZkUS .stack .geist-wrapper testid="resource-center/article-page" data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:0px"}
::::::::::::::::::::::::::::::::::::::: article-page_layout__69qTg
:::::::::::: {.stack_stack__iZkUS .stack .article-sidebar_article-sidebar__a5Tzx .article-page_sidebar__HMZMM data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:48px"}
[](/resources){.link_link__hbWKh .link_secondary__F1rqx
.article-sidebar_backlink__k_HNY .back-link_back-link__TzKJw
testid="resource-center/back-link" zone="same"}

::: {.stack_stack__iZkUS .stack .back-link_content__Pu5_r data-version="v1" style="--stack-flex:initial;--stack-direction:row;--stack-align:center;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:8px"}
![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOnZhcigtLWRzLWdyYXktNzAwKSIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi40Njk2NiAxMy43ODAzTDYuOTk5OTkgMTQuMzEwN0w4LjA2MDY1IDEzLjI1TDcuNTMwMzIgMTIuNzE5N0wzLjU2MDY1IDguNzUwMDFIMTQuMjVIMTVWNy4yNTAwMUgxNC4yNUgzLjU2MDY1TDcuNTMwMzIgMy4yODAzNEw4LjA2MDY1IDIuNzUwMDFMNi45OTk5OSAxLjY4OTM1TDYuNDY5NjYgMi4yMTk2OEwxLjM5NjQ0IDcuMjkyOUMxLjAwNTkyIDcuNjgzNDIgMS4wMDU5MiA4LjMxNjU5IDEuMzk2NDQgOC43MDcxMUw2LjQ2OTY2IDEzLjc4MDNaIiBmaWxsPSJjdXJyZW50Q29sb3IiIC8+PC9zdmc+)Back
to Resources
:::

:::::::::: {.stack_stack__iZkUS .stack .article-sidebar_indented__BZXsX data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:48px"}
::::::::: {.stack_stack__iZkUS .stack data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
Contents

:::::::: {.stack_stack__iZkUS .stack data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[The Core Web Vitals and their related
metrics](#the-core-web-vitals-and-their-related-metrics){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}[Network response: Time to first byte
(TTFB)](#network-response-time-to-first-byte-(ttfb)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}

::: {.stack_stack__iZkUS .stack .article-contents_subheadings__3Z3Ve data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[Optimizing TTFB: Intelligently cached content served from the
edge](#optimizing-ttfb-intelligently-cached-content-served-from-the-edge){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}
:::

[Rendering: First Contentful Paint (FCP) and Largest Contentful Paint
(LCP)](#rendering-first-contentful-paint-(fcp)-and-largest-contentful-paint-(lcp)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}

::: {.stack_stack__iZkUS .stack .article-contents_subheadings__3Z3Ve data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[How LCP differs from FCP](#how-lcp-differs-from-fcp){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}[Optimizing LCP: Make it
static
content](#optimizing-lcp-make-it-static-content){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}[Further optimizing LCP
with Next.js: Component-level data
control](#further-optimizing-lcp-with-next.js-component-level-data-control){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}
:::

[Load complete: Time to Interactive (TTI) and Total Blocking Time
(TBT)](#load-complete-time-to-interactive-(tti)-and-total-blocking-time-(tbt)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}

::: {.stack_stack__iZkUS .stack .article-contents_subheadings__3Z3Ve data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[Optimizing TTI and TBT: Only load what you
need](#optimizing-tti-and-tbt-only-load-what-you-need){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}
:::

[Responsiveness: First Input Delay (FID) and Interaction to Next Paint
(INP)](#responsiveness-first-input-delay-(fid)-and-interaction-to-next-paint-(inp)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}

::: {.stack_stack__iZkUS .stack .article-contents_subheadings__3Z3Ve data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[First Input Delay (FID) vs. Interaction to Next Paint
(INP)](#first-input-delay-(fid)-vs.-interaction-to-next-paint-(inp)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}[Optimizing INP: Stay
off the main
thread](#optimizing-inp-stay-off-the-main-thread){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}
:::

[Usability: Cumulative Layout Shift
(CLS)](#usability-cumulative-layout-shift-(cls)){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
zone="null"}

::: {.stack_stack__iZkUS .stack .article-contents_subheadings__3Z3Ve data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:4px"}
[Vercel Toolbar tracks layout
shifts](#vercel-toolbar-tracks-layout-shifts){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}[Optimizing layout
shifts: Stay still after
FCP](#optimizing-layout-shifts-stay-still-after-fcp){.link_link__hbWKh
.link_secondary__F1rqx .article-contents_contents-heading__StRN_
.article-contents_subheading__EEvFp zone="null"}
:::

[Takeaways](#takeaways){.link_link__hbWKh .link_secondary__F1rqx
.article-contents_contents-heading__StRN_ zone="null"}
::::::::
:::::::::
::::::::::
::::::::::::

:::::::::::::::::::::::::::: {.stack_stack__iZkUS .stack .article-page_article__3tHhB data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:48px"}
[](/resources){.link_link__hbWKh .link_secondary__F1rqx
.article-page_mobile-backlink__H_AiM .back-link_back-link__TzKJw
testid="resource-center/back-link" zone="same"}

::: {.stack_stack__iZkUS .stack .back-link_content__Pu5_r data-version="v1" style="--stack-flex:initial;--stack-direction:row;--stack-align:center;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:8px"}
![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOnZhcigtLWRzLWdyYXktNzAwKSIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi40Njk2NiAxMy43ODAzTDYuOTk5OTkgMTQuMzEwN0w4LjA2MDY1IDEzLjI1TDcuNTMwMzIgMTIuNzE5N0wzLjU2MDY1IDguNzUwMDFIMTQuMjVIMTVWNy4yNTAwMUgxNC4yNUgzLjU2MDY1TDcuNTMwMzIgMy4yODAzNEw4LjA2MDY1IDIuNzUwMDFMNi45OTk5OSAxLjY4OTM1TDYuNDY5NjYgMi4yMTk2OEwxLjM5NjQ0IDcuMjkyOUMxLjAwNTkyIDcuNjgzNDIgMS4wMDU5MiA4LjMxNjU5IDEuMzk2NDQgOC43MDcxMUw2LjQ2OTY2IDEzLjc4MDNaIiBmaWxsPSJjdXJyZW50Q29sb3IiIC8+PC9zdmc+)Back
to Resources
:::

:::: {.stack_stack__iZkUS .stack .entry-heading_entry-heading__ABnRD .article-page_heading__wuoDP data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:flex-start;--stack-justify:flex-start;--stack-padding:0px;--sm-stack-gap:16px;--md-stack-gap:24px;--lg-stack-gap:24px;--xl-stack-gap:24px"}
::: {.stack_stack__iZkUS .stack .entry-heading_eyebrow__2EynD data-version="v1" style="--stack-flex:initial;--stack-direction:row;--stack-align:center;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:16px"}
Mar. 13th, 2024
:::

[How Vercel improves your website's search engine
ranking]{br="«R4qkvffblslfb»" brr="1"
style="display:inline-block;vertical-align:top;text-decoration:inherit;text-wrap:balance"}

[Strategies to optimize your Core Web Vitals.]{br="«R6qkvffblslfb»"
brr="1"
style="display:inline-block;vertical-align:top;text-decoration:inherit;text-wrap:balance"}
::::

::::::::::::::::::::: {.stack_stack__iZkUS .stack .article-page_content__OLc9X role="main" data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:0px"}
:::::::::::::::::::: article-page_text__Sf989
Your web page's ranking in Google Search is [determined by four main
factors](https://www.google.com/intl/en_uk/search/howsearchworks/how-search-works/ranking-results/#usability){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}:

1.  **Relevancy:** How close is the topic of your page to the search
    query?
2.  **Quality:** How trustworthy and helpful is your page to others?
3.  **Usability:** How smooth is the experience of navigating your page?
4.  **Context:** Who is the user and what are they more likely to need?

Relevancy and quality, though crucial, can be a bit of a "black box" to
improve. Many strategies yield tangible results, but there are few hard
and fast rules.

Context is dependent on your user. For instance, if they search for a
sport, they're likely to get their local (or favorite) team.

Usability, however, is highly measurable. Google uses transparent
performance metrics to rank your application by its "page experience."
These metrics are called [Core Web
Vitals](https://web.dev/articles/vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

We've recently written quite a bit about how *exactly* Google [ranks
your application through its Core Web
Vitals](https://vercel.com/blog/how-core-web-vitals-affect-seo){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}. The
goal of this article is to show how Vercel and JavaScript frameworks
such as Next.js can help you optimize the usability of your site, and
thereby improve search ranking and user conversion.

## []{#the-core-web-vitals-and-their-related-metrics .block .-mt-5 .pt-5 .invisible .absolute}[The Core Web Vitals and their related metrics](#the-core-web-vitals-and-their-related-metrics){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#the-core-web-vitals-and-their-related-metrics .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

The three [Core Web
Vitals](https://web.dev/articles/vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} (LCP,
CLS, and INP\*) often get conflated with other, albeit helpful, metrics
that measure your site's performance for users. Only improvements to the
Core Web Vitals themselves will impact your site's search ranking.

However, all these metrics are closely related to Core Web Vitals.
Optimizing one metric often yields positive results in many of the
others.

Plus, i**mprovements in each of these metrics have** [**real, measured
business
impact**](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#why-do-you-need-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}**,**
with the potential to increase users' conversion rates on your site.
They correlate directly to a better experience for your users.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="484"
alt="The Core Web Vitals and their related metrics." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="484"
alt="The Core Web Vitals and their related metrics." />
</div>
</figure>
:::

Note that these metrics can be viewed in a 28-day sliding window through
[Google Search Console or PageSpeed
Insights](https://vercel.com/blog/how-core-web-vitals-affect-seo#how-to-see-your-application%E2%80%99s-core-web-vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, or
in realtime with [Vercel Speed
Insights](https://vercel.com/blog/how-core-web-vitals-affect-seo#a-quicker-way-to-iterate-on-core-web-vitals-vercel-speed-insights){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Below, we provide a brief overview of each metric and show a few places
where Vercel (or the [35+ frameworks it
supports](https://vercel.com/docs/frameworks){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}) can
help you optimize your application.

Performance optimization is a deep and nuanced topic, so we've linked to
other articles where possible to explore specific recommended
strategies.

------------------------------------------------------------------------

\*On March 12, 2024, [INP replaced
FID](https://web.dev/blog/inp-cwv-march-12){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} as a
Core Web Vital.

## []{#network-response-time-to-first-byte-(ttfb) .block .-mt-5 .pt-5 .invisible .absolute}[Network response: Time to first byte (TTFB)](#network-response-time-to-first-byte-(ttfb)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#network-response-time-to-first-byte-ttfb .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[TTFB](https://web.dev/articles/ttfb){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}
represents how long it takes from a user clicking on a link to the
response beginning to stream in (very quickly after seeing the white
page, but before actual content starts painting).

More technically, TTFB is the sum of redirect time, service worker boot
time (if applicable), DNS lookup, TLS handshake, and request---up until
the first byte of the response arrives.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="446"
alt="In this diagram, TTFB is the time between `redirectStart` and `responseStart`." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="446"
alt="In this diagram, TTFB is the time between `redirectStart` and `responseStart`." />
</div>
</figure>
:::

### []{#optimizing-ttfb-intelligently-cached-content-served-from-the-edge .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing TTFB: Intelligently cached content served from the edge](#optimizing-ttfb-intelligently-cached-content-served-from-the-edge){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-ttfb-intelligently-cached-content-served-from-the-edge .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Vercel's Frontend Cloud automatically optimizes your application's TTFB
through its [Edge
Network](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#what-is-a-content-delivery-network-(cdn)){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} and
[latency caching within the request
lifecycle](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#the-lifecycle-of-a-user-request){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Additionally, [Partial
Prerendering](https://vercel.com/blog/partial-prerendering-with-next-js-creating-a-new-default-rendering-model){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}---a
recent Next.js optimization that can be adopted into any framework
thanks to Vercel's [Build Output
API](https://vercel.com/docs/build-output-api/v3){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank"
zone="null"}---replaces Edge SSR and [does not block TTFB on serverless
cold
starts](https://vercel.com/blog/partial-prerendering-with-next-js-creating-a-new-default-rendering-model#understanding-the-trade-offs-eliminated){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
drastically improving the metric.

For instance, within a month of Parachute migrating to Vercel, their
[load times improved by
60%](https://vercel.com/customers/parachute){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

## []{#rendering-first-contentful-paint-(fcp)-and-largest-contentful-paint-(lcp) .block .-mt-5 .pt-5 .invisible .absolute}[Rendering: First Contentful Paint (FCP) and Largest Contentful Paint (LCP)](#rendering-first-contentful-paint-(fcp)-and-largest-contentful-paint-(lcp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#rendering-first-contentful-paint-fcp-and-largest-contentful-paint-lcp .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

FCP measures the time from the moment the page starts loading to the
moment the first piece of content from the Document Object Model (DOM)
is rendered on screen. This could be any content from the webpage such
as an image, a block of text, or a canvas render.

Since FCP includes the time it takes to unload the previous page and
establish the new connection, it can appear significantly different
between [field and lab
testing](https://vercel.com/blog/how-core-web-vitals-affect-seo#how-google-ranks-based-on-page-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

More anecdotally, FCP is when your user first sees something happening
on the screen, indicating that your site will be ready to use shortly,
which helps to lock in their engagement.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="274"
alt="FCP occurs here in the second frame, when the very first content paints to the page." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="274"
alt="FCP occurs here in the second frame, when the very first content paints to the page." />
</div>
</figure>
:::

### []{#how-lcp-differs-from-fcp .block .-mt-5 .pt-5 .invisible .absolute}[How LCP differs from FCP](#how-lcp-differs-from-fcp){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#how-lcp-differs-from-fcp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

LCP tracks how long it takes for the most noticeable element at the top
of your webpage to become visible. It essentially measures how quickly
the user feels they can begin using the page.

The "most noticeable element" measured by LCP can be a variety of
things---your `h1`{.code_code__FwiyS style="font-size:0.9em"}, a large
(but not background) image, a video, etc. To see exactly which element
Google is counting as your LCP, use
[Lighthouse](https://pagespeed.web.dev){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

### []{#optimizing-lcp-make-it-static-content .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing LCP: Make it static content](#optimizing-lcp-make-it-static-content){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-lcp-make-it-static-content .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

In order to load and render the element responsible for your LCP as
quickly as possible, it should ideally be static content fetched from
the nearest edge location.

This is easier said than done. While homepages are relatively
straightforward to keep as static content, product pages or articles
often come from an external CMS. This has led to the approach of
statically generating website pages at build time (often referred to as
static site generation or SSG).

SSG, however, comes with the downside of not being able to change your
page's content without rebuilding the application it's a part of. As
your business scales, this can lead to long build times and [the
overhead that slower deployment iteration comes
with](https://vercel.com/blog/improving-developer-workflow#1){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank"
zone="null"}-real-costs-from-slow-builds).

This is why Vercel offers [Incremental Static Regeneration
(ISR)](https://vercel.com/docs/incremental-static-regeneration){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
available simply by writing your normal framework code.

ISR means that, at the page level, you can choose whether you will serve
fresh or cached data *and* how often that cached data should be
refreshed. Crucially, this data refresh can happen on-demand or at a set
interval, *without redeploying your application*.

You can optimize this so that your users always get edge-cached data
when they navigate to your site, thereby improving LCP, TTI, and TBT.

### []{#further-optimizing-lcp-with-next.js-component-level-data-control .block .-mt-5 .pt-5 .invisible .absolute}[Further optimizing LCP with Next.js: Component-level data control](#further-optimizing-lcp-with-next.js-component-level-data-control){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#further-optimizing-lcp-with-next.js-component-level-data-control .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Next.js takes ISR a step further, leveraging [React Suspense and Server
Components](https://vercel.com/blog/understanding-react-server-components){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} to
give you *component-level* flexibility of which data is dynamic and
which is cached.

As opposed to page-level control, Next.js's fine-grained flexibility
means that **you can ensure that your LCP element is both static**
***and*** **streamed before any other piece of your page**, leaving
smaller dynamic components to load in as they become ready.

While doing the opposite---streaming smaller pieces first---may give a
faster FCP, LCP is the Core Web Vital that is measured by Google to rank
your application and indicates a better overall user experience.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="294"
alt="In this diagram, the browser initially recognizes the top-left header as the LCP before eventually settling on the center element for the final measurement. In this specific case, LCP could be optimized by streaming in the center element before the header." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="294"
alt="In this diagram, the browser initially recognizes the top-left header as the LCP before eventually settling on the center element for the final measurement. In this specific case, LCP could be optimized by streaming in the center element before the header." />
</div>
</figure>
:::

## []{#load-complete-time-to-interactive-(tti)-and-total-blocking-time-(tbt) .block .-mt-5 .pt-5 .invisible .absolute}[Load complete: Time to Interactive (TTI) and Total Blocking Time (TBT)](#load-complete-time-to-interactive-(tti)-and-total-blocking-time-(tbt)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#load-complete-time-to-interactive-tti-and-total-blocking-time-tbt .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

TTI tracks the time from when the page starts loading to when it can
reliably respond to user input quickly.

More precisely, TTI waits for a "quiet window" of 5 seconds where your
page has no long tasks (tasks that run for more than 50ms on the main
thread) and no more than 2 active network GET requests. Then it looks
backward from that window to when the last long task ended. This point
is your TTI.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="510"
alt="In this diagram, to find the TTI, the browser looks back from the 5-second quiet window to the last main thread long task." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="510"
alt="In this diagram, to find the TTI, the browser looks back from the 5-second quiet window to the last main thread long task." />
</div>
</figure>
:::

With rendering techniques like server-side rendering (SSR), pages can
paint content before users can click buttons on the page. This can lead
to frustration, or, in a worst-case scenario, to users thinking the site
is broken.

This is why you want to keep the time between FCP and TTI to an absolute
minimum (\< 800ms). This window is measured by TBT.

### []{#optimizing-tti-and-tbt-only-load-what-you-need .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing TTI and TBT: Only load what you need](#optimizing-tti-and-tbt-only-load-what-you-need){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-tti-and-tbt-only-load-what-you-need .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

React Suspense and Server Components drastically improve TTI and TBT.
Thanks to the concurrent nature of Suspense, the hydration of components
happens *off the main thread.*

Even if your application streams in many components, the TTI "quiet
window" will still look back to when the last main-thread long task
ended. Your TTI (and thereby TBT) improves dramatically when properly
utilizing Suspense.

For instance, using this selective hydration strategy, [Vercel was able
to reduce the
TBT](https://vercel.com/blog/improving-interaction-to-next-paint-with-react-18-and-suspense#case-study-next.js-site){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} of
`nextjs.org`{.code_code__FwiyS style="font-size:0.9em"} from 430ms to
80ms.

------------------------------------------------------------------------

Secondly, many modern JavaScript frameworks (like
[Next.js](https://nextjs.org/){.link_link__hbWKh .link_highlight__kJZF9
rel="noopener" target="_blank" zone="null"} or
[SvelteKit](https://kit.svelte.dev/){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
optimized to run on Vercel) ensure that only the visible UI (or
soon-to-be visible UI) accounts for the JavaScript running on the page.

Generally speaking, websites have to manually delegate which code should
run and when. In a traditional React single-page application (SPA), for
example, the browser loads *all* your application code on initial load.

Modern JS frameworks [drastically improve on
this](https://nextjs.org/docs/app/building-your-application/optimizing){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
automatically dividing code at the route level (code splitting) and even
the viewport level (lazy loading).

With these automatic optimizations, you can get to the TTI "quiet
window" much faster, while still ensuring the user gets everything they
need to interact.

## []{#responsiveness-first-input-delay-(fid)-and-interaction-to-next-paint-(inp) .block .-mt-5 .pt-5 .invisible .absolute}[Responsiveness: First Input Delay (FID) and Interaction to Next Paint (INP)](#responsiveness-first-input-delay-(fid)-and-interaction-to-next-paint-(inp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#responsiveness-first-input-delay-fid-and-interaction-to-next-paint-inp .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[FID is a former Core Web
Vital](https://web.dev/articles/fid){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} that
measures the time between the first user interaction on a page (i.e.
clicking a link, tapping a button, or using some other JS control) to
the time when the browser's main thread is idle and able to begin
processing that event.

Keep in mind that, by default, JavaScript is single-threaded. If you're
loading a large JS script, nothing else can happen on your page until
the main thread is idle---even [reacting to a user's click on a plain
HTML
link](https://web.dev/articles/fid#what_if_an_interaction_doesnt_have_an_event_listener){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

There are strategies such as workers and React Concurrency that can help
this, which we'll get into below.

### []{#first-input-delay-(fid)-vs.-interaction-to-next-paint-(inp) .block .-mt-5 .pt-5 .invisible .absolute}[First Input Delay (FID) vs. Interaction to Next Paint (INP)](#first-input-delay-(fid)-vs.-interaction-to-next-paint-(inp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#first-input-delay-fid-vs.-interaction-to-next-paint-inp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

[FID was recently replaced by
INP](https://web.dev/blog/inp-cwv-march-12){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} as a
Core Web Vital to measure the speed of your application's interactivity.
Let's break down the differences between the two:

- FID measures only the *first* input and browser response. INP
  considers the responsiveness of all user input for the duration of the
  page session. Then, it averages the times together for the score,
  ignoring one "worst time" for every 50 interactions.
- FID only measures the delay between input and the browser *starting*
  to respond. INP measures the time between the input and the event
  completing in response---to the presentation of the next frame.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="An interaction&#39;s lifecycle starts with an input delay until event handlers kick in, often due to prolonged tasks on the main thread. After the event handlers execute, there&#39;s a brief delay before the next frame is displayed." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="An interaction&#39;s lifecycle starts with an input delay until event handlers kick in, often due to prolonged tasks on the main thread. After the event handlers execute, there&#39;s a brief delay before the next frame is displayed." />
</div>
</figure>
:::

- INP additionally groups events together that occur as part of the same
  logical user interaction, defining the interaction's latency as the
  maximum duration of all its events.

Note that it is possible that a user can visit a page and not interact,
in which case no INP score will be calculated. This also happens if the
page is accessed by a bot such as a search crawler or headless browser
that has not been scripted to interact with the page.

### []{#optimizing-inp-stay-off-the-main-thread .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing INP: Stay off the main thread](#optimizing-inp-stay-off-the-main-thread){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-inp-stay-off-the-main-thread .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Since the main thread must be idle to process event handlers, [React
Suspense helps
us](https://vercel.com/blog/improving-interaction-to-next-paint-with-react-18-and-suspense){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} here,
too, by keeping component hydration off the main thread. Additionally,
you can look into:

- Using CSS instead of JavaScript for animations, since a separate
  thread handles CSS, called the browser's compositor thread. Some CSS
  properties, such as transforms, can also [use the GPU for
  rendering](https://developer.mozilla.org/en-US/docs/Web/Performance/Fundamentals#specific_coding_tips_for_application_performance){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- [Throttling or debouncing
  events](https://www.freecodecamp.org/news/javascript-debounce-example/){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank"
  zone="null"}---especially ones driven by scrolling---that may be
  called repeatedly by user input.
- [Reducing your DOM
  size](https://web.dev/articles/dom-size-and-interactivity){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, to
  avoid having the browser recalculate too many elements on each render.
- [Getting SVGs out of your client-side JS
  bundle](https://kurtextrem.de/posts/svg-in-js){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
  Inline SVGs can be especially troublesome if you have too many (DOM
  size) or if they end up in your client-side JS bundle (for example, by
  inlining them in JSX). You may need reference them in
  an `<img>`{.code_code__FwiyS style="font-size:0.9em"} tag or look
  into [alternate ways of rendering
  them](https://css-tricks.com/too-many-svgs-clogging-up-your-markup-try-use/){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
  such as keeping them in [React Server
  Components](https://vercel.com/blog/understanding-react-server-components){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- In the case of a complex application, using web workers
  to [arbitrarily execute JavaScript on separate
  threads](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
  keeping the main thread open for user input.
- Lazy loading images, fonts, or scripts, which [Next.js can
  automatically do for
  you](https://nextjs.org/docs/app/building-your-application/optimizing){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- Code splitting, [as mentioned
  above](#optimizing-tti-and-tbt-only-load-what-you-need){.link_link__hbWKh
  .link_highlight__kJZF9 zone="null"}.

## []{#usability-cumulative-layout-shift-(cls) .block .-mt-5 .pt-5 .invisible .absolute}[Usability: Cumulative Layout Shift (CLS)](#usability-cumulative-layout-shift-(cls)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#usability-cumulative-layout-shift-cls .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[CLS measures *layout
shifts*](https://web.dev/articles/cls){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which occur any time a visible element jumps in position from one frame
to the next.

Layout shifts often occur when loading resources asynchronously or
dynamically adding DOM elements to the page *above* existing content
(causing content to be pushed down).

Among other things, the cause of a layout shift could be an image or
video whose dimensions are not specified, a font that displays at a size
different from its fallback, or a third-party ad or widget that
dynamically resizes.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="Rendering new content above existing content pushes existing content down the page (layout shift), interrupting the user experience." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="Rendering new content above existing content pushes existing content down the page (layout shift), interrupting the user experience." />
</div>
</figure>
:::

CLS measures the largest burst of layout shifts during a session. Google
tracks layout shifts within 1-second windows, calculating a score for
each shift based on the affected portion of the viewport and the
distance the element moved.

These scores are summed to get a cumulative score for each window. The
highest score among these windows represents the actual CLS score. A
good CLS score is below 0.1.

### []{#vercel-toolbar-tracks-layout-shifts .block .-mt-5 .pt-5 .invisible .absolute}[Vercel Toolbar tracks layout shifts](#vercel-toolbar-tracks-layout-shifts){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#vercel-toolbar-tracks-layout-shifts .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Your CLS score can result from significant shifts of large elements
(highly noticeable) or many tiny shifts of smaller elements (tough to
debug).

Especially on fast connections, layout shifts may happen too quickly for
the eye to track. Google does not tell you which elements are shifting
and impacting your score.

That's why we added a [layout shift tracker to the Vercel
Toolbar](https://vercel.com/changelog/automatically-detect-and-replay-layout-shifts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which programmatically detects every layout shift and points you exactly
to the problem elements.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=828&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=1920&amp;q=75 2x"
width="800" height="450"
alt="Vercel can automatically detect and replay layout shifts on your deployments from the Vercel Toolbar." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=828&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=1920&amp;q=75 2x"
width="800" height="450"
alt="Vercel can automatically detect and replay layout shifts on your deployments from the Vercel Toolbar." />
</div>
</figure>
:::

Since Vercel's [Preview Deployments are
true-to-prod](https://vercel.com/blog/the-developer-experience-of-the-frontend-cloud){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, you
get the assurance that no unforeseen network conditions will add layout
shifts back in.

For extra convenience, the Vercel Toolbar can also be [added to your
local dev
environment](https://vercel.com/docs/workflow-collaboration/vercel-toolbar/in-production-and-localhost){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which allows you to detect layout shifts before they're ever merged into
code.

### []{#optimizing-layout-shifts-stay-still-after-fcp .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing layout shifts: Stay still after FCP](#optimizing-layout-shifts-stay-still-after-fcp){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-layout-shifts-stay-still-after-fcp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

A layout shift occurring means that the browser has to recalculate the
position of all elements in the DOM affected by the shift. This can
impact your other web performance metrics, especially if your DOM is
large.

Let's look at how to improve.

------------------------------------------------------------------------

**Scripts that impact the layout of the page should not run after First
Contentful Paint (FCP).**

A/B testing, feature flags, or even redirects and
internationalization---which must run *after* user request---can often
alter the layout of your page and drastically impact your CLS.

Unfortunately, these types of scripts can be very difficult to render
while still meeting Core Web Vitals standards such as LCP and CLS.

- **Client-side rendering (CSR)** your experimentation will evaluate
  which version of your app a user will see *after* the page has loaded.
  This results in poor UX since your users will have to wait for loaders
  while the experiment is evaluated and eventually rendered, creating
  layout shift.
- **Server-side rendering (SSR)** can slow page response times as
  experiments are evaluated on demand. Users have to wait for the
  experiments along a similar timeline as CSR---but stare at a blank
  page until all of the work is done to build and serve the page.

::: {.section .text-[var(--geist-foreground)] .text-center .relative .z-[100] vercel-edit-target="true" style="background-color:var(--geist-background)"}
> <figure
> class="overflow-hidden w-[100px] h-[100px] rounded-full flex items-center justify-center mt-3 mb-0 gradient-bg">
> <div class="border-4 border-white rounded-full">
> <div class="block lg:hidden">
> <span class="avatar_avatar__3ccqO border-none" aria-label=""
> data-geist-avatar="" data-mask="true" data-resolved="false"
> data-version="v1" role="img" style="--size:60px"><img
> src="https://images.ctfassets.net/e5382hct74si/6qrBUDhtNDTBIsnnJ623BE/1e5458960a512e0071c81b40d7cdefbf/1628260108075.jpeg"
> class="image_intrinsic__ulrJk object-contain" style="color:transparent"
> data-version="v1" loading="eager" decoding="sync" data-nimg="1"
> width="60" height="60" /></span>
> </div>
> <div class="hidden lg:block">
> <span class="avatar_avatar__3ccqO border-none" aria-label=""
> data-geist-avatar="" data-mask="true" data-resolved="false"
> data-version="v1" role="img" style="--size:68px"><img
> src="https://images.ctfassets.net/e5382hct74si/6qrBUDhtNDTBIsnnJ623BE/1e5458960a512e0071c81b40d7cdefbf/1628260108075.jpeg"
> class="image_intrinsic__ulrJk object-contain" style="color:transparent"
> data-version="v1" loading="eager" decoding="sync" data-nimg="1"
> width="68" height="68" /></span>
> </div>
> </div>
> </figure>
>
> "With Edge Middleware, we can show the control or experiment version
> of a page immediately instead of using third-party scripts. This
> results in better performance and removes the likelihood of
> flickering/layout shifts."
>
> ::: {.flex .flex-col .lg:flex-row}
> [Jillian Anderson Slate]{.font-bold .tracking-[-0.01rem]
> .text-[var(--geist-foreground)] .leading-5 .lg:mr-2}[Software Engineer
> at SumUp]{.tracking-[-0.01rem] .leading-5
> .text-[var(--accents-5)]}[]{.hidden}
> :::
:::

Vercel combines [Incremental Static Regeneration
(ISR)](#optimizing-lcp-make-it-static-content){.link_link__hbWKh
.link_highlight__kJZF9 zone="null"} and Edge Middleware to give your
users [statically-rendered
experiments](https://vercel.com/blog/zero-cls-experiments-nextjs-edge-config){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
serving them as fast as possible to your users with zero layout shift.

This is the best of all worlds: you can have highly dynamic code at
build, and Vercel's Edge Network computes what to statically serve
[within 15ms at
runtime](https://vercel.com/blog/zero-cls-experiments-nextjs-edge-config#leveraging-edge-config-for-read-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Plus, you can [manage all your experimentation with Vercel's Edge
Config](https://vercel.com/blog/edge-config-and-launch-darkly){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
without the need to redeploy.

------------------------------------------------------------------------

**Images should notify the DOM of their** **`width`{.code_code__FwiyS
style="font-size:0.9em"}** **and** **`height`{.code_code__FwiyS
style="font-size:0.9em"}.**

Since even the smallest images take slightly longer to load than text,
your site's image containers should have an explicit
`width`{.code_code__FwiyS style="font-size:0.9em"} and
`height`{.code_code__FwiyS style="font-size:0.9em"} to prevent elements
from being pushed around when the image loads in.

Frameworks like Next.js and SvelteKit offer [automatic image
optimization](https://nextjs.org/docs/pages/building-your-application/optimizing/images){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} to
avoid this challenge in the first place by determining the width and
height of your image ahead of time to prevent CLS while the image loads
in.

------------------------------------------------------------------------

**Fonts and their fallbacks should match in size.**

When using custom fonts, the browser often renders the fallback a split
second before the custom font. If your fallback and custom font do not
match in size, this can cause elements to shift when the custom font
loads.

There are many [ways to optimize this
behavior](https://vercel.com/guides/optimizing-web-fonts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, but
the built-in [font optimization in
Next.js](https://nextjs.org/docs/app/building-your-application/optimizing/fonts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} is
the easiest. Next.js allows you to automatically self-host any font
file, which drastically improves load time (rather than requesting the
file from Google Fonts, for instance). Additionally, Next.js then
provides a fallback font to match the size of your custom font.

------------------------------------------------------------------------

**Animations on one element should not affect other elements.**

[Animations](https://web.dev/articles/cls#animations_and_transitions){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} can
heavily impact CLS if not properly handled. Ideally, animations should
target an element's [CSS transform
property](https://developer.mozilla.org/docs/Web/CSS/transform){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

For instance, instead of changing `width`{.code_code__FwiyS
style="font-size:0.9em"} or `height`{.code_code__FwiyS
style="font-size:0.9em"}, use `transform: scale()`{.code_code__FwiyS
style="font-size:0.9em"}.

To move elements around, avoid changing the `top`{.code_code__FwiyS
style="font-size:0.9em"}, `right`{.code_code__FwiyS
style="font-size:0.9em"}, `bottom`{.code_code__FwiyS
style="font-size:0.9em"}, or `left`{.code_code__FwiyS
style="font-size:0.9em"} properties and
use `transform: translate()`{.code_code__FwiyS
style="font-size:0.9em"} instead.

Plus, [as noted
above](#optimizing-inp-stay-off-the-main-thread){.link_link__hbWKh
.link_highlight__kJZF9 zone="null"}, CSS transforms can be
GPU-accelerated, improving the availability of your CPU's main thread
and thereby optimizing your Core Web Vitals.

## []{#takeaways .block .-mt-5 .pt-5 .invisible .absolute}[Takeaways](#takeaways){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#takeaways .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

Let's take a look at what we've covered:

- After content relevancy and structure, Core Web Vitals---LCP, FID, and
  CLS---greatly impact your application's ranking in Google Search.
- FID was swapped out on March 12, 2024 for INP as the third Core Web
  Vital.
- Deploying your application on Vercel's Frontend Cloud vastly and
  automatically optimizes your application's TTFB, which in turn
  improves your FCP and LCP.
- Next.js 14's Partial Prerendering further optimizes TTFB, FCP, and
  LCP.
- Vercel's Incremental Static Regeneration (ISR) can drastically improve
  your users' time to see page content. Next.js offers ISR with
  component-level granularity, as opposed to page-level. ISR directly
  optimizes FCP, LCP, TTI, and TBT.
- React Suspense, available for use within Next.js, gives you vast
  flexibility in optimizing your LCP, TTI, TBT, and INP.
- The built-in automatic optimizations of Next.js for images, fonts, and
  scripts drastically improve LCP, TTI, TBT, INP, and even CLS.
- The Vercel Toolbar enables you to accurately measure hard-to-spot CLS,
  both in local dev and in your true-to-prod Preview Deployments.
- Vercel's Edge Middleware unlocks CLS-free A/B testing, feature flags,
  redirects, internationalization, and more.
::::::::::::::::::::
:::::::::::::::::::::

::::: {.stack_stack__iZkUS .stack .article-page_mobile-menu__SgAj2 .mobile-contents-menu_mobile-contents-menu__g6cUY data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:flex-start;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:0px"}
[]{.button_content__1aE1_}

:::: {.stack_stack__iZkUS .stack data-version="v1" style="--stack-flex:initial;--stack-direction:row;--stack-align:stretch;--stack-justify:space-between;--stack-padding:0px;--stack-gap:0px"}
::: {.stack_stack__iZkUS .stack data-version="v1" style="--stack-flex:initial;--stack-direction:row;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:8px"}
![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9IndpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Y29sb3I6Y3VycmVudENvbG9yIiB2aWV3Ym94PSIwIDAgMTYgMTYiIHdpZHRoPSIxNiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xLjc1IDRIMVY1LjVIMS43NUgxNC4yNUgxNVY0SDE0LjI1SDEuNzVaTTEuNzUgMTAuNUgxVjEySDEuNzVIMTQuMjVIMTVWMTAuNUgxNC4yNUgxLjc1WiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)

Contents
:::

![](data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibW9iaWxlLWNvbnRlbnRzLW1lbnVfaWNvbl9fWlJBaU8iIGRhdGEtdGVzdGlkPSJnZWlzdC1pY29uIiBoZWlnaHQ9IjE2IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHlsZT0id2lkdGg6MjBweDtoZWlnaHQ6MjBweDtjb2xvcjp2YXIoLS1kcy1ncmF5LTcwMCkiIHZpZXdib3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2Ij48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjA2MDcgNS40OTk5OUwxMy41MzAzIDYuMDMwMzJMOC43MDcxIDEwLjg1MzVDOC4zMTY1OCAxMS4yNDQxIDcuNjgzNDEgMTEuMjQ0MSA3LjI5Mjg5IDEwLjg1MzVMMi40Njk2NiA2LjAzMDMyTDEuOTM5MzMgNS40OTk5OUwyLjk5OTk5IDQuNDM5MzNMMy41MzAzMiA0Ljk2OTY2TDcuOTk5OTkgOS40MzkzM0wxMi40Njk3IDQuOTY5NjZMMTMgNC40MzkzM0wxNC4wNjA3IDUuNDk5OTlaIiBmaWxsPSJjdXJyZW50Q29sb3IiIC8+PC9zdmc+){.mobile-contents-menu_icon__ZRAiO}
::::
:::::
::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::: {.stack_stack__iZkUS .stack .article-page_content__OLc9X role="main" data-version="v1" style="--stack-flex:initial;--stack-direction:column;--stack-align:stretch;--stack-justify:flex-start;--stack-padding:0px;--stack-gap:0px"}
:::::::::::::::::::: article-page_text__Sf989
Your web page's ranking in Google Search is [determined by four main
factors](https://www.google.com/intl/en_uk/search/howsearchworks/how-search-works/ranking-results/#usability){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}:

1.  **Relevancy:** How close is the topic of your page to the search
    query?
2.  **Quality:** How trustworthy and helpful is your page to others?
3.  **Usability:** How smooth is the experience of navigating your page?
4.  **Context:** Who is the user and what are they more likely to need?

Relevancy and quality, though crucial, can be a bit of a "black box" to
improve. Many strategies yield tangible results, but there are few hard
and fast rules.

Context is dependent on your user. For instance, if they search for a
sport, they're likely to get their local (or favorite) team.

Usability, however, is highly measurable. Google uses transparent
performance metrics to rank your application by its "page experience."
These metrics are called [Core Web
Vitals](https://web.dev/articles/vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

We've recently written quite a bit about how *exactly* Google [ranks
your application through its Core Web
Vitals](https://vercel.com/blog/how-core-web-vitals-affect-seo){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}. The
goal of this article is to show how Vercel and JavaScript frameworks
such as Next.js can help you optimize the usability of your site, and
thereby improve search ranking and user conversion.

## []{#the-core-web-vitals-and-their-related-metrics .block .-mt-5 .pt-5 .invisible .absolute}[The Core Web Vitals and their related metrics](#the-core-web-vitals-and-their-related-metrics){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#the-core-web-vitals-and-their-related-metrics .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

The three [Core Web
Vitals](https://web.dev/articles/vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} (LCP,
CLS, and INP\*) often get conflated with other, albeit helpful, metrics
that measure your site's performance for users. Only improvements to the
Core Web Vitals themselves will impact your site's search ranking.

However, all these metrics are closely related to Core Web Vitals.
Optimizing one metric often yields positive results in many of the
others.

Plus, i**mprovements in each of these metrics have** [**real, measured
business
impact**](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#why-do-you-need-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}**,**
with the potential to increase users' conversion rates on your site.
They correlate directly to a better experience for your users.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="484"
alt="The Core Web Vitals and their related metrics." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1qYT9WgPJa0vuN8KbVaZei%2Ffb982ffeebb06c158dfeaa3b1b4e2276%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="484"
alt="The Core Web Vitals and their related metrics." />
</div>
</figure>
:::

Note that these metrics can be viewed in a 28-day sliding window through
[Google Search Console or PageSpeed
Insights](https://vercel.com/blog/how-core-web-vitals-affect-seo#how-to-see-your-application%E2%80%99s-core-web-vitals){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, or
in realtime with [Vercel Speed
Insights](https://vercel.com/blog/how-core-web-vitals-affect-seo#a-quicker-way-to-iterate-on-core-web-vitals-vercel-speed-insights){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Below, we provide a brief overview of each metric and show a few places
where Vercel (or the [35+ frameworks it
supports](https://vercel.com/docs/frameworks){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}) can
help you optimize your application.

Performance optimization is a deep and nuanced topic, so we've linked to
other articles where possible to explore specific recommended
strategies.

------------------------------------------------------------------------

\*On March 12, 2024, [INP replaced
FID](https://web.dev/blog/inp-cwv-march-12){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} as a
Core Web Vital.

## []{#network-response-time-to-first-byte-(ttfb) .block .-mt-5 .pt-5 .invisible .absolute}[Network response: Time to first byte (TTFB)](#network-response-time-to-first-byte-(ttfb)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#network-response-time-to-first-byte-ttfb .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[TTFB](https://web.dev/articles/ttfb){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}
represents how long it takes from a user clicking on a link to the
response beginning to stream in (very quickly after seeing the white
page, but before actual content starts painting).

More technically, TTFB is the sum of redirect time, service worker boot
time (if applicable), DNS lookup, TLS handshake, and request---up until
the first byte of the response arrives.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1h3SQ03UeTwaiXHJssc7Jc%2F3bd96073119acea0245f298c12cfde24%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="446"
alt="In this diagram, TTFB is the time between `redirectStart` and `responseStart`." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5hpAwMvnTFAvkfKcj99UID%2F33f11c128c38ba81044277bc6881108b%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="446"
alt="In this diagram, TTFB is the time between `redirectStart` and `responseStart`." />
</div>
</figure>
:::

### []{#optimizing-ttfb-intelligently-cached-content-served-from-the-edge .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing TTFB: Intelligently cached content served from the edge](#optimizing-ttfb-intelligently-cached-content-served-from-the-edge){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-ttfb-intelligently-cached-content-served-from-the-edge .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Vercel's Frontend Cloud automatically optimizes your application's TTFB
through its [Edge
Network](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#what-is-a-content-delivery-network-(cdn)){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} and
[latency caching within the request
lifecycle](https://vercel.com/blog/the-user-experience-of-the-frontend-cloud#the-lifecycle-of-a-user-request){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Additionally, [Partial
Prerendering](https://vercel.com/blog/partial-prerendering-with-next-js-creating-a-new-default-rendering-model){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}---a
recent Next.js optimization that can be adopted into any framework
thanks to Vercel's [Build Output
API](https://vercel.com/docs/build-output-api/v3){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank"
zone="null"}---replaces Edge SSR and [does not block TTFB on serverless
cold
starts](https://vercel.com/blog/partial-prerendering-with-next-js-creating-a-new-default-rendering-model#understanding-the-trade-offs-eliminated){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
drastically improving the metric.

For instance, within a month of Parachute migrating to Vercel, their
[load times improved by
60%](https://vercel.com/customers/parachute){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

## []{#rendering-first-contentful-paint-(fcp)-and-largest-contentful-paint-(lcp) .block .-mt-5 .pt-5 .invisible .absolute}[Rendering: First Contentful Paint (FCP) and Largest Contentful Paint (LCP)](#rendering-first-contentful-paint-(fcp)-and-largest-contentful-paint-(lcp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#rendering-first-contentful-paint-fcp-and-largest-contentful-paint-lcp .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

FCP measures the time from the moment the page starts loading to the
moment the first piece of content from the Document Object Model (DOM)
is rendered on screen. This could be any content from the webpage such
as an image, a block of text, or a canvas render.

Since FCP includes the time it takes to unload the previous page and
establish the new connection, it can appear significantly different
between [field and lab
testing](https://vercel.com/blog/how-core-web-vitals-affect-seo#how-google-ranks-based-on-page-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

More anecdotally, FCP is when your user first sees something happening
on the screen, indicating that your site will be ready to use shortly,
which helps to lock in their engagement.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6v6QtVeOsXkZRT2COJ7dee%2F688e47918d0f9219ec17cfaba2649536%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="274"
alt="FCP occurs here in the second frame, when the very first content paints to the page." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FYr0spmX0KLvAYMMW7AMde%2F7abee06b23e21db5e0762622002e511d%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="274"
alt="FCP occurs here in the second frame, when the very first content paints to the page." />
</div>
</figure>
:::

### []{#how-lcp-differs-from-fcp .block .-mt-5 .pt-5 .invisible .absolute}[How LCP differs from FCP](#how-lcp-differs-from-fcp){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#how-lcp-differs-from-fcp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

LCP tracks how long it takes for the most noticeable element at the top
of your webpage to become visible. It essentially measures how quickly
the user feels they can begin using the page.

The "most noticeable element" measured by LCP can be a variety of
things---your `h1`{.code_code__FwiyS style="font-size:0.9em"}, a large
(but not background) image, a video, etc. To see exactly which element
Google is counting as your LCP, use
[Lighthouse](https://pagespeed.web.dev){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

### []{#optimizing-lcp-make-it-static-content .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing LCP: Make it static content](#optimizing-lcp-make-it-static-content){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-lcp-make-it-static-content .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

In order to load and render the element responsible for your LCP as
quickly as possible, it should ideally be static content fetched from
the nearest edge location.

This is easier said than done. While homepages are relatively
straightforward to keep as static content, product pages or articles
often come from an external CMS. This has led to the approach of
statically generating website pages at build time (often referred to as
static site generation or SSG).

SSG, however, comes with the downside of not being able to change your
page's content without rebuilding the application it's a part of. As
your business scales, this can lead to long build times and [the
overhead that slower deployment iteration comes
with](https://vercel.com/blog/improving-developer-workflow#1){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank"
zone="null"}-real-costs-from-slow-builds).

This is why Vercel offers [Incremental Static Regeneration
(ISR)](https://vercel.com/docs/incremental-static-regeneration){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
available simply by writing your normal framework code.

ISR means that, at the page level, you can choose whether you will serve
fresh or cached data *and* how often that cached data should be
refreshed. Crucially, this data refresh can happen on-demand or at a set
interval, *without redeploying your application*.

You can optimize this so that your users always get edge-cached data
when they navigate to your site, thereby improving LCP, TTI, and TBT.

### []{#further-optimizing-lcp-with-next.js-component-level-data-control .block .-mt-5 .pt-5 .invisible .absolute}[Further optimizing LCP with Next.js: Component-level data control](#further-optimizing-lcp-with-next.js-component-level-data-control){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#further-optimizing-lcp-with-next.js-component-level-data-control .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Next.js takes ISR a step further, leveraging [React Suspense and Server
Components](https://vercel.com/blog/understanding-react-server-components){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} to
give you *component-level* flexibility of which data is dynamic and
which is cached.

As opposed to page-level control, Next.js's fine-grained flexibility
means that **you can ensure that your LCP element is both static**
***and*** **streamed before any other piece of your page**, leaving
smaller dynamic components to load in as they become ready.

While doing the opposite---streaming smaller pieces first---may give a
faster FCP, LCP is the Core Web Vital that is measured by Google to rank
your application and indicates a better overall user experience.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6Mhs2TYXCUV9Iy3w3qpcim%2Fd2d0a59628e35c34beb27cf32342f8e4%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="294"
alt="In this diagram, the browser initially recognizes the top-left header as the LCP before eventually settling on the center element for the final measurement. In this specific case, LCP could be optimized by streaming in the center element before the header." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F59SuluefzInYApSnqusehb%2F8658b1237a666d0ebe48cee011a95a1f%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="294"
alt="In this diagram, the browser initially recognizes the top-left header as the LCP before eventually settling on the center element for the final measurement. In this specific case, LCP could be optimized by streaming in the center element before the header." />
</div>
</figure>
:::

## []{#load-complete-time-to-interactive-(tti)-and-total-blocking-time-(tbt) .block .-mt-5 .pt-5 .invisible .absolute}[Load complete: Time to Interactive (TTI) and Total Blocking Time (TBT)](#load-complete-time-to-interactive-(tti)-and-total-blocking-time-(tbt)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#load-complete-time-to-interactive-tti-and-total-blocking-time-tbt .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

TTI tracks the time from when the page starts loading to when it can
reliably respond to user input quickly.

More precisely, TTI waits for a "quiet window" of 5 seconds where your
page has no long tasks (tasks that run for more than 50ms on the main
thread) and no more than 2 active network GET requests. Then it looks
backward from that window to when the last long task ended. This point
is your TTI.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2JNutaavfl8FEUhb14llRI%2F895b6ae23ccaa50fb2f76cefd6e02ded%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="510"
alt="In this diagram, to find the TTI, the browser looks back from the 5-second quiet window to the last main thread long task." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ngtJYRldrrfYZofp9PJFN%2Fe647c81a7aa2d22a7d05813d09bb1be3%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="510"
alt="In this diagram, to find the TTI, the browser looks back from the 5-second quiet window to the last main thread long task." />
</div>
</figure>
:::

With rendering techniques like server-side rendering (SSR), pages can
paint content before users can click buttons on the page. This can lead
to frustration, or, in a worst-case scenario, to users thinking the site
is broken.

This is why you want to keep the time between FCP and TTI to an absolute
minimum (\< 800ms). This window is measured by TBT.

### []{#optimizing-tti-and-tbt-only-load-what-you-need .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing TTI and TBT: Only load what you need](#optimizing-tti-and-tbt-only-load-what-you-need){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-tti-and-tbt-only-load-what-you-need .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

React Suspense and Server Components drastically improve TTI and TBT.
Thanks to the concurrent nature of Suspense, the hydration of components
happens *off the main thread.*

Even if your application streams in many components, the TTI "quiet
window" will still look back to when the last main-thread long task
ended. Your TTI (and thereby TBT) improves dramatically when properly
utilizing Suspense.

For instance, using this selective hydration strategy, [Vercel was able
to reduce the
TBT](https://vercel.com/blog/improving-interaction-to-next-paint-with-react-18-and-suspense#case-study-next.js-site){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} of
`nextjs.org`{.code_code__FwiyS style="font-size:0.9em"} from 430ms to
80ms.

------------------------------------------------------------------------

Secondly, many modern JavaScript frameworks (like
[Next.js](https://nextjs.org/){.link_link__hbWKh .link_highlight__kJZF9
rel="noopener" target="_blank" zone="null"} or
[SvelteKit](https://kit.svelte.dev/){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
optimized to run on Vercel) ensure that only the visible UI (or
soon-to-be visible UI) accounts for the JavaScript running on the page.

Generally speaking, websites have to manually delegate which code should
run and when. In a traditional React single-page application (SPA), for
example, the browser loads *all* your application code on initial load.

Modern JS frameworks [drastically improve on
this](https://nextjs.org/docs/app/building-your-application/optimizing){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
automatically dividing code at the route level (code splitting) and even
the viewport level (lazy loading).

With these automatic optimizations, you can get to the TTI "quiet
window" much faster, while still ensuring the user gets everything they
need to interact.

## []{#responsiveness-first-input-delay-(fid)-and-interaction-to-next-paint-(inp) .block .-mt-5 .pt-5 .invisible .absolute}[Responsiveness: First Input Delay (FID) and Interaction to Next Paint (INP)](#responsiveness-first-input-delay-(fid)-and-interaction-to-next-paint-(inp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#responsiveness-first-input-delay-fid-and-interaction-to-next-paint-inp .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[FID is a former Core Web
Vital](https://web.dev/articles/fid){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} that
measures the time between the first user interaction on a page (i.e.
clicking a link, tapping a button, or using some other JS control) to
the time when the browser's main thread is idle and able to begin
processing that event.

Keep in mind that, by default, JavaScript is single-threaded. If you're
loading a large JS script, nothing else can happen on your page until
the main thread is idle---even [reacting to a user's click on a plain
HTML
link](https://web.dev/articles/fid#what_if_an_interaction_doesnt_have_an_event_listener){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

There are strategies such as workers and React Concurrency that can help
this, which we'll get into below.

### []{#first-input-delay-(fid)-vs.-interaction-to-next-paint-(inp) .block .-mt-5 .pt-5 .invisible .absolute}[First Input Delay (FID) vs. Interaction to Next Paint (INP)](#first-input-delay-(fid)-vs.-interaction-to-next-paint-(inp)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#first-input-delay-fid-vs.-interaction-to-next-paint-inp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

[FID was recently replaced by
INP](https://web.dev/blog/inp-cwv-march-12){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} as a
Core Web Vital to measure the speed of your application's interactivity.
Let's break down the differences between the two:

- FID measures only the *first* input and browser response. INP
  considers the responsiveness of all user input for the duration of the
  page session. Then, it averages the times together for the score,
  ignoring one "worst time" for every 50 interactions.
- FID only measures the delay between input and the browser *starting*
  to respond. INP measures the time between the input and the event
  completing in response---to the presentation of the next frame.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1cUU2GEoe9Yo8P1ZpKD4oi%2F7bc6406b9426d0b0aa288d256298ee26%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="An interaction&#39;s lifecycle starts with an input delay until event handlers kick in, often due to prolonged tasks on the main thread. After the event handlers execute, there&#39;s a brief delay before the next frame is displayed." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F4oksS79eV3x4O09uzhaRhk%2F2ee4c1acc36e0cfeab175d123d3471c5%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="An interaction&#39;s lifecycle starts with an input delay until event handlers kick in, often due to prolonged tasks on the main thread. After the event handlers execute, there&#39;s a brief delay before the next frame is displayed." />
</div>
</figure>
:::

- INP additionally groups events together that occur as part of the same
  logical user interaction, defining the interaction's latency as the
  maximum duration of all its events.

Note that it is possible that a user can visit a page and not interact,
in which case no INP score will be calculated. This also happens if the
page is accessed by a bot such as a search crawler or headless browser
that has not been scripted to interact with the page.

### []{#optimizing-inp-stay-off-the-main-thread .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing INP: Stay off the main thread](#optimizing-inp-stay-off-the-main-thread){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-inp-stay-off-the-main-thread .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Since the main thread must be idle to process event handlers, [React
Suspense helps
us](https://vercel.com/blog/improving-interaction-to-next-paint-with-react-18-and-suspense){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} here,
too, by keeping component hydration off the main thread. Additionally,
you can look into:

- Using CSS instead of JavaScript for animations, since a separate
  thread handles CSS, called the browser's compositor thread. Some CSS
  properties, such as transforms, can also [use the GPU for
  rendering](https://developer.mozilla.org/en-US/docs/Web/Performance/Fundamentals#specific_coding_tips_for_application_performance){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- [Throttling or debouncing
  events](https://www.freecodecamp.org/news/javascript-debounce-example/){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank"
  zone="null"}---especially ones driven by scrolling---that may be
  called repeatedly by user input.
- [Reducing your DOM
  size](https://web.dev/articles/dom-size-and-interactivity){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, to
  avoid having the browser recalculate too many elements on each render.
- [Getting SVGs out of your client-side JS
  bundle](https://kurtextrem.de/posts/svg-in-js){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
  Inline SVGs can be especially troublesome if you have too many (DOM
  size) or if they end up in your client-side JS bundle (for example, by
  inlining them in JSX). You may need reference them in
  an `<img>`{.code_code__FwiyS style="font-size:0.9em"} tag or look
  into [alternate ways of rendering
  them](https://css-tricks.com/too-many-svgs-clogging-up-your-markup-try-use/){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
  such as keeping them in [React Server
  Components](https://vercel.com/blog/understanding-react-server-components){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- In the case of a complex application, using web workers
  to [arbitrarily execute JavaScript on separate
  threads](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
  keeping the main thread open for user input.
- Lazy loading images, fonts, or scripts, which [Next.js can
  automatically do for
  you](https://nextjs.org/docs/app/building-your-application/optimizing){.link_link__hbWKh
  .link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.
- Code splitting, [as mentioned
  above](#optimizing-tti-and-tbt-only-load-what-you-need){.link_link__hbWKh
  .link_highlight__kJZF9 zone="null"}.

## []{#usability-cumulative-layout-shift-(cls) .block .-mt-5 .pt-5 .invisible .absolute}[Usability: Cumulative Layout Shift (CLS)](#usability-cumulative-layout-shift-(cls)){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#usability-cumulative-layout-shift-cls .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

[CLS measures *layout
shifts*](https://web.dev/articles/cls){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which occur any time a visible element jumps in position from one frame
to the next.

Layout shifts often occur when loading resources asynchronously or
dynamically adding DOM elements to the page *above* existing content
(causing content to be pushed down).

Among other things, the cause of a layout shift could be an image or
video whose dimensions are not specified, a font that displays at a size
different from its fallback, or a third-party ad or widget that
dynamically resizes.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2EwzG7F1GNWu0SOGU4RTIc%2F85a303e25fd443ff1afa4073e03c1971%2FInline_Graphic_1920xVariable.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="Rendering new content above existing content pushes existing content down the page (layout shift), interrupting the user experience." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1080&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F71by1KiXPxnafR17YKhFaj%2Fbda96f0a506750eb21f445561408e08c%2FInline_Graphic_1920xVariable-1.png&amp;w=1920&amp;q=75 2x"
width="960" height="392"
alt="Rendering new content above existing content pushes existing content down the page (layout shift), interrupting the user experience." />
</div>
</figure>
:::

CLS measures the largest burst of layout shifts during a session. Google
tracks layout shifts within 1-second windows, calculating a score for
each shift based on the affected portion of the viewport and the
distance the element moved.

These scores are summed to get a cumulative score for each window. The
highest score among these windows represents the actual CLS score. A
good CLS score is below 0.1.

### []{#vercel-toolbar-tracks-layout-shifts .block .-mt-5 .pt-5 .invisible .absolute}[Vercel Toolbar tracks layout shifts](#vercel-toolbar-tracks-layout-shifts){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#vercel-toolbar-tracks-layout-shifts .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

Your CLS score can result from significant shifts of large elements
(highly noticeable) or many tiny shifts of smaller elements (tough to
debug).

Especially on fast connections, layout shifts may happen too quickly for
the eye to track. Google does not tell you which elements are shifting
and impacting your score.

That's why we added a [layout shift tracker to the Vercel
Toolbar](https://vercel.com/changelog/automatically-detect-and-replay-layout-shifts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which programmatically detects every layout shift and points you exactly
to the problem elements.

::: geist-hide-on-dark
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=828&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7h3gBhpJxa6cn4CFPogarj%2F9a51efe9c3ad040c33b69ab2a062d720%2FLayout_Shifts.jpg&amp;w=1920&amp;q=75 2x"
width="800" height="450"
alt="Vercel can automatically detect and replay layout shifts on your deployments from the Vercel Toolbar." />
</div>
</figure>
:::

::: geist-hide-on-light
<figure class="relative my-[var(--geist-gap)] lg:my-10"
data-vercel-edit-target="true">
<div
class="bg-[var(--geist-background)] max-w-full mx-auto overflow-hidden rounded-[var(--geist-radius)] flex justify-center"
style="max-width:800px">
<img
src="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=1920&amp;q=75"
class="image_intrinsic__ulrJk" style="color:transparent"
data-version="v1" loading="lazy" decoding="async" data-nimg="1"
srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=828&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3TC5LakviZMy57QUkqdVQI%2F977b1891e53e877714cb596382aed395%2FLayout_Shifts-1.jpg&amp;w=1920&amp;q=75 2x"
width="800" height="450"
alt="Vercel can automatically detect and replay layout shifts on your deployments from the Vercel Toolbar." />
</div>
</figure>
:::

Since Vercel's [Preview Deployments are
true-to-prod](https://vercel.com/blog/the-developer-experience-of-the-frontend-cloud){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, you
get the assurance that no unforeseen network conditions will add layout
shifts back in.

For extra convenience, the Vercel Toolbar can also be [added to your
local dev
environment](https://vercel.com/docs/workflow-collaboration/vercel-toolbar/in-production-and-localhost){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
which allows you to detect layout shifts before they're ever merged into
code.

### []{#optimizing-layout-shifts-stay-still-after-fcp .block .-mt-5 .pt-5 .invisible .absolute}[Optimizing layout shifts: Stay still after FCP](#optimizing-layout-shifts-stay-still-after-fcp){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#optimizing-layout-shifts-stay-still-after-fcp .group .flex .items-baseline .mt-8 .text-xl .leading-6 .tracking-[-0.01rem] .lg:text-2xl .lg:leading-8 .lg:mt-9 .heading3}

A layout shift occurring means that the browser has to recalculate the
position of all elements in the DOM affected by the shift. This can
impact your other web performance metrics, especially if your DOM is
large.

Let's look at how to improve.

------------------------------------------------------------------------

**Scripts that impact the layout of the page should not run after First
Contentful Paint (FCP).**

A/B testing, feature flags, or even redirects and
internationalization---which must run *after* user request---can often
alter the layout of your page and drastically impact your CLS.

Unfortunately, these types of scripts can be very difficult to render
while still meeting Core Web Vitals standards such as LCP and CLS.

- **Client-side rendering (CSR)** your experimentation will evaluate
  which version of your app a user will see *after* the page has loaded.
  This results in poor UX since your users will have to wait for loaders
  while the experiment is evaluated and eventually rendered, creating
  layout shift.
- **Server-side rendering (SSR)** can slow page response times as
  experiments are evaluated on demand. Users have to wait for the
  experiments along a similar timeline as CSR---but stare at a blank
  page until all of the work is done to build and serve the page.

::: {.section .text-[var(--geist-foreground)] .text-center .relative .z-[100] vercel-edit-target="true" style="background-color:var(--geist-background)"}
> <figure
> class="overflow-hidden w-[100px] h-[100px] rounded-full flex items-center justify-center mt-3 mb-0 gradient-bg">
> <div class="border-4 border-white rounded-full">
> <div class="block lg:hidden">
> <span class="avatar_avatar__3ccqO border-none" aria-label=""
> data-geist-avatar="" data-mask="true" data-resolved="false"
> data-version="v1" role="img" style="--size:60px"><img
> src="https://images.ctfassets.net/e5382hct74si/6qrBUDhtNDTBIsnnJ623BE/1e5458960a512e0071c81b40d7cdefbf/1628260108075.jpeg"
> class="image_intrinsic__ulrJk object-contain" style="color:transparent"
> data-version="v1" loading="eager" decoding="sync" data-nimg="1"
> width="60" height="60" /></span>
> </div>
> <div class="hidden lg:block">
> <span class="avatar_avatar__3ccqO border-none" aria-label=""
> data-geist-avatar="" data-mask="true" data-resolved="false"
> data-version="v1" role="img" style="--size:68px"><img
> src="https://images.ctfassets.net/e5382hct74si/6qrBUDhtNDTBIsnnJ623BE/1e5458960a512e0071c81b40d7cdefbf/1628260108075.jpeg"
> class="image_intrinsic__ulrJk object-contain" style="color:transparent"
> data-version="v1" loading="eager" decoding="sync" data-nimg="1"
> width="68" height="68" /></span>
> </div>
> </div>
> </figure>
>
> "With Edge Middleware, we can show the control or experiment version
> of a page immediately instead of using third-party scripts. This
> results in better performance and removes the likelihood of
> flickering/layout shifts."
>
> ::: {.flex .flex-col .lg:flex-row}
> [Jillian Anderson Slate]{.font-bold .tracking-[-0.01rem]
> .text-[var(--geist-foreground)] .leading-5 .lg:mr-2}[Software Engineer
> at SumUp]{.tracking-[-0.01rem] .leading-5
> .text-[var(--accents-5)]}[]{.hidden}
> :::
:::

Vercel combines [Incremental Static Regeneration
(ISR)](#optimizing-lcp-make-it-static-content){.link_link__hbWKh
.link_highlight__kJZF9 zone="null"} and Edge Middleware to give your
users [statically-rendered
experiments](https://vercel.com/blog/zero-cls-experiments-nextjs-edge-config){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
serving them as fast as possible to your users with zero layout shift.

This is the best of all worlds: you can have highly dynamic code at
build, and Vercel's Edge Network computes what to statically serve
[within 15ms at
runtime](https://vercel.com/blog/zero-cls-experiments-nextjs-edge-config#leveraging-edge-config-for-read-speed){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

Plus, you can [manage all your experimentation with Vercel's Edge
Config](https://vercel.com/blog/edge-config-and-launch-darkly){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"},
without the need to redeploy.

------------------------------------------------------------------------

**Images should notify the DOM of their** **`width`{.code_code__FwiyS
style="font-size:0.9em"}** **and** **`height`{.code_code__FwiyS
style="font-size:0.9em"}.**

Since even the smallest images take slightly longer to load than text,
your site's image containers should have an explicit
`width`{.code_code__FwiyS style="font-size:0.9em"} and
`height`{.code_code__FwiyS style="font-size:0.9em"} to prevent elements
from being pushed around when the image loads in.

Frameworks like Next.js and SvelteKit offer [automatic image
optimization](https://nextjs.org/docs/pages/building-your-application/optimizing/images){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} to
avoid this challenge in the first place by determining the width and
height of your image ahead of time to prevent CLS while the image loads
in.

------------------------------------------------------------------------

**Fonts and their fallbacks should match in size.**

When using custom fonts, the browser often renders the fallback a split
second before the custom font. If your fallback and custom font do not
match in size, this can cause elements to shift when the custom font
loads.

There are many [ways to optimize this
behavior](https://vercel.com/guides/optimizing-web-fonts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}, but
the built-in [font optimization in
Next.js](https://nextjs.org/docs/app/building-your-application/optimizing/fonts){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} is
the easiest. Next.js allows you to automatically self-host any font
file, which drastically improves load time (rather than requesting the
file from Google Fonts, for instance). Additionally, Next.js then
provides a fallback font to match the size of your custom font.

------------------------------------------------------------------------

**Animations on one element should not affect other elements.**

[Animations](https://web.dev/articles/cls#animations_and_transitions){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"} can
heavily impact CLS if not properly handled. Ideally, animations should
target an element's [CSS transform
property](https://developer.mozilla.org/docs/Web/CSS/transform){.link_link__hbWKh
.link_highlight__kJZF9 rel="noopener" target="_blank" zone="null"}.

For instance, instead of changing `width`{.code_code__FwiyS
style="font-size:0.9em"} or `height`{.code_code__FwiyS
style="font-size:0.9em"}, use `transform: scale()`{.code_code__FwiyS
style="font-size:0.9em"}.

To move elements around, avoid changing the `top`{.code_code__FwiyS
style="font-size:0.9em"}, `right`{.code_code__FwiyS
style="font-size:0.9em"}, `bottom`{.code_code__FwiyS
style="font-size:0.9em"}, or `left`{.code_code__FwiyS
style="font-size:0.9em"} properties and
use `transform: translate()`{.code_code__FwiyS
style="font-size:0.9em"} instead.

Plus, [as noted
above](#optimizing-inp-stay-off-the-main-thread){.link_link__hbWKh
.link_highlight__kJZF9 zone="null"}, CSS transforms can be
GPU-accelerated, improving the availability of your CPU's main thread
and thereby optimizing your Core Web Vitals.

## []{#takeaways .block .-mt-5 .pt-5 .invisible .absolute}[Takeaways](#takeaways){.border-b .border-transparent .text-inherit .no-underline .hover:border-b-current .inline-block .lg:mr-2.5}[![](data:image/svg+xml;base64,PHN2ZyBkYXRhLXRlc3RpZD0iZ2Vpc3QtaWNvbiIgaGVpZ2h0PSIxNiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9ImNvbG9yOmN1cnJlbnRDb2xvciIgdmlld2JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC40Njk2OCAxLjQ2OTY4QzEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgLTAuMjAzOTIzIDE0LjUzMDMgMS40Njk2OEMxNi4yMDM5IDMuMTQzMjkgMTYuMjAzOSA1Ljg1Njc0IDE0LjUzMDMgNy41MzAzNEwxMi4wMzAzIDEwLjAzMDNMMTAuOTY5NyA4Ljk2OTY4TDEzLjQ2OTcgNi40Njk2OEMxNC41NTc1IDUuMzgxODYgMTQuNTU3NSAzLjYxODE2IDEzLjQ2OTcgMi41MzAzNEMxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAxLjQ0MjUyIDkuNTMwMzQgMi41MzAzNEw3LjAzMDM0IDUuMDMwMzRMNS45Njk2OCAzLjk2OTY4TDguNDY5NjggMS40Njk2OFpNMTEuNTMwMyA1LjUzMDM0TDUuNTMwMzQgMTEuNTMwM0w0LjQ2OTY4IDEwLjQ2OTdMMTAuNDY5NyA0LjQ2OTY4TDExLjUzMDMgNS41MzAzNFpNMS40Njk2OCAxNC41MzAzQzMuMTQzMjkgMTYuMjAzOSA1Ljg1NjczIDE2LjIwNCA3LjUzMDM0IDE0LjUzMDNMMTAuMDMwMyAxMi4wMzAzTDguOTY5NjggMTAuOTY5N0w2LjQ2OTY4IDEzLjQ2OTdDNS4zODE4NiAxNC41NTc1IDMuNjE4MTYgMTQuNTU3NSAyLjUzMDM0IDEzLjQ2OTdDMS40NDI1MiAxMi4zODE5IDEuNDQyNTIgMTAuNjE4MiAyLjUzMDM0IDkuNTMwMzRMNS4wMzAzNCA3LjAzMDM0TDMuOTY5NjggNS45Njk2OEwxLjQ2OTY4IDguNDY5NjhDLTAuMjAzOTIzIDEwLjE0MzMgLTAuMjAzOTI1IDEyLjg1NjcgMS40Njk2OCAxNC41MzAzWiIgZmlsbD0iY3VycmVudENvbG9yIiAvPjwvc3ZnPg==)]{.text-center .align-middle .border .invisible .hidden .lg:inline-block .group-hover-visible} {#takeaways .group .flex .items-baseline .mt-[52px] .mb-6 .tracking-[-0.03rem] .leading-7 .lg:mt-[60px] .lg:text-[2rem] .lg:leading-9 .heading2}

Let's take a look at what we've covered:

- After content relevancy and structure, Core Web Vitals---LCP, FID, and
  CLS---greatly impact your application's ranking in Google Search.
- FID was swapped out on March 12, 2024 for INP as the third Core Web
  Vital.
- Deploying your application on Vercel's Frontend Cloud vastly and
  automatically optimizes your application's TTFB, which in turn
  improves your FCP and LCP.
- Next.js 14's Partial Prerendering further optimizes TTFB, FCP, and
  LCP.
- Vercel's Incremental Static Regeneration (ISR) can drastically improve
  your users' time to see page content. Next.js offers ISR with
  component-level granularity, as opposed to page-level. ISR directly
  optimizes FCP, LCP, TTI, and TBT.
- React Suspense, available for use within Next.js, gives you vast
  flexibility in optimizing your LCP, TTI, TBT, and INP.
- The built-in automatic optimizations of Next.js for images, fonts, and
  scripts drastically improve LCP, TTI, TBT, INP, and even CLS.
- The Vercel Toolbar enables you to accurately measure hard-to-spot CLS,
  both in local dev and in your true-to-prod Preview Deployments.
- Vercel's Edge Middleware unlocks CLS-free A/B testing, feature flags,
  redirects, internationalization, and more.
::::::::::::::::::::
:::::::::::::::::::::
